import{j as e,r as n,u as j,f as v,s as p,i as _,a as D,b as w}from"./index-CY5u0xBH.js";const k="_card_1sz1g_1",C="_tags_1sz1g_67",B="_publicTag_1sz1g_87",N="_privateTag_1sz1g_99",g={card:k,tags:C,publicTag:B,privateTag:N};function P({name:c,description:a,isPublic:s}){return e.jsxs("div",{className:g.card,children:[e.jsx("img",{src:"src/assets/DocumentCardIcon.png",alt:"Document Card Icon"}),e.jsxs("div",{children:[e.jsx("h2",{children:c}),e.jsx("p",{children:a})]}),e.jsx("div",{className:g.tags,children:s?e.jsx("p",{className:g.publicTag,children:"Public"}):e.jsx("p",{className:g.privateTag,children:"Private"})})]})}const S="_browseDocumentsPage_1p4aj_21",y="_pagination_1p4aj_55",E="_shake_1p4aj_101",x={browseDocumentsPage:S,pagination:y,shake:E};function T(){const[c,a]=n.useState(""),[s,o]=n.useState([]),[d,u]=n.useState(!1),r=n.useRef(null),l=j();function i(t){a(t.target.value),u(!0)}n.useEffect(()=>{function t(h){r.current&&!r.current.contains(h.target)&&u(!1)}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),n.useEffect(()=>{if(c.trim()===""){o([]);return}const t=setTimeout(()=>{v(c).then(h=>o(h)).catch(()=>o([]))},200);return()=>{clearTimeout(t)}},[c]);async function m(t){try{if(await _(t)){l(`/documents/${t}`);return}}catch{alert("You don't have permission to view this document")}}return e.jsxs("div",{className:p.searchContainer,ref:r,children:[e.jsx("input",{type:"text",placeholder:"Search",value:c,onChange:i,className:p.input,onFocus:()=>u(!0)}),d&&s.length>0&&e.jsx("ul",{className:p.dropdown,children:s.map(t=>e.jsx("li",{className:p.item,onClick:()=>m(t.id),tabIndex:0,role:"button",children:t.name},t.id))})]})}const R="_createDocumentButtonBackground_1bsyk_9",L="_createButton_1bsyk_27",M="_dropdown_1bsyk_97",b={createDocumentButtonBackground:R,createButton:L,dropdown:M},$="_createDocumentMenu_1km82_1",F="_closeButton_1km82_115",I="_isPublicLabel_1km82_147",z="_isPublicButton_1km82_161",O="_active_1km82_185",f={createDocumentMenu:$,closeButton:F,isPublicLabel:I,isPublicButton:z,active:O};function V({onClose:c}){const a=n.useRef(null),[s,o]=n.useState(!1),d=j();function u(r){r.preventDefault();const l=new FormData(a.current),i={name:l.get("name"),description:l.get("description"),content:l.get("content"),isPublic:s};D(i).then(m=>{c(),d(`/documents/${m.id}`)}).catch(m=>console.error(m))}return e.jsxs("div",{className:f.createDocumentMenu,children:[e.jsx("button",{className:f.closeButton,onClick:c,children:"Ã—"}),e.jsx("h2",{children:"Create New File"}),e.jsxs("form",{ref:a,onSubmit:u,children:[e.jsxs("label",{children:["File Name:",e.jsx("input",{name:"name",type:"text",placeholder:"Enter file name",required:!0})]}),e.jsxs("label",{children:["Description:",e.jsx("textarea",{name:"description",placeholder:"Enter description"})]}),e.jsxs("label",{children:["Content:",e.jsx("textarea",{name:"content",placeholder:"Enter file content"})]}),e.jsxs("label",{className:f.isPublicLabel,children:["Visibility:",e.jsx("button",{type:"button",className:`${f.isPublicButton} ${s?f.active:""}`,onClick:()=>o(r=>!r),children:s?"Public":"Private"})]}),e.jsx("button",{type:"submit",children:"Create"})]})]})}function q(){const[c,a]=n.useState(!1),[s,o]=n.useState(!1),d=n.useRef(null);function u(){a(i=>!i)}function r(){o(!0),a(!1)}function l(){o(!1)}return n.useEffect(()=>{function i(m){d.current&&!d.current.contains(m.target)&&a(!1)}return c?document.addEventListener("mousedown",i):document.removeEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[c]),e.jsxs(e.Fragment,{children:[s&&e.jsx(V,{onClose:l}),e.jsxs("div",{className:b.createDocumentButtonBackground,ref:d,children:[c&&e.jsxs("div",{className:b.dropdown,children:[e.jsx("button",{onClick:r,children:"Create Document"}),e.jsx("button",{children:"Create Folder"})]}),e.jsx("button",{className:b.createButton,onClick:u,children:"+"})]})]})}function H(){const[c,a]=n.useState([]),[s,o]=n.useState(1),[d,u]=n.useState(!0),[r,l]=n.useState(null),i=j();n.useEffect(()=>{w(s).then(t=>{a(t.items),u(s<t.totalPages)}).catch(()=>{a([]),u(!1)})},[s]);async function m(t){try{if(await _(t)){i(`/documents/${t}`);return}}catch{l(t),setTimeout(()=>l(null),500)}}return e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsx(q,{}),e.jsxs("div",{className:x.browseDocumentsPage,children:[c.map(t=>e.jsx("div",{onClick:()=>m(t.id),className:r===t.id?x.shake:"",children:e.jsx(P,{...t})},t.id)),e.jsx("div",{})]}),e.jsxs("div",{className:x.pagination,children:[e.jsx("button",{disabled:s===1,onClick:()=>o(t=>t-1),children:"<"}),e.jsxs("span",{children:["Page ",s]}),e.jsx("button",{disabled:!d,onClick:()=>o(t=>t+1),children:">"})]})]})}export{H as default};
